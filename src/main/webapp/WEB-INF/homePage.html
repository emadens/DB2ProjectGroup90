<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HomePage</title>
</head>
<body>
  <h1 align="center">In this HomePage Carlo Sucks</h1>
  <h4 align="right" th:text="${username}"></h4>
  <section>
      <div th:if="${loggedIn!=0}">
      </div>
      <div th:unless="${loggedIn!=0}"> Hey stranger YOU SUCK!</div>
  </section>
  <section>
      <div>
          <form action="Purchase" method="GET" id="buyService">
          <button type="submit" form="buyService" value="Purchase">Purchase</button>
          </form>
      </div>

  </section>
  <section>
      <fieldset th:each="p : ${packages}">
          <div>
              <p th:text="'Package Name: ' + ${p.name}"></p>
              <p th:text="'Services:'"></p>
              <fieldset th:each="s : ${p.services}">
                  <div>
                      <p th:text="'Service type: ' + ${s.type}"></p>
                      <p th:if="${s.type.name() == 'MOBILE_PHONE'}"
                         th:text="'Minutes: ' + ${s.minutes}"></p>
                      <p th:if="${s.type.name() == 'MOBILE_PHONE'}"
                         th:text="'SMS: ' + ${s.sms}"></p>
                      <p th:if="${s.type.name() == 'MOBILE_PHONE'}"
                         th:text="'Extra fee for SMS: ' + ${s.extraFeeSMS}"></p>
                      <p th:if="${s.type.name() == 'MOBILE_PHONE'}"
                         th:text="'Extra fee for Minutes: ' + ${s.extraFeeMinutes}"></p>
                      <p th:if="${s.type.name() == 'MOBILE_INTERNET' || s.type.name() == 'FIXED_INTERNET'}"
                         th:text="'Giga: ' + ${s.giga}"></p>
                      <p th:if="${s.type.name() == 'MOBILE_INTERNET' || s.type.name() == 'FIXED_INTERNET'}"
                         th:text="'Extra fee for giga: ' + ${s.extraFeeGiga}"></p>
                  </div>
              </fieldset>
              <p th:text="'Validity periods:'"></p>
              <fieldset th:each="vp : ${p.validityPeriods}">
                  <div>
                      <p th:text="${vp.months}+' months'"></p>
                      <p th:text="${vp.fee}+' denari/month'"></p>
                  </div>
              </fieldset>
              <p th:text="'Optional products:'"></p>
              <fieldset th:each="op : ${p.optionalProducts}">
                  <div>
                      <p th:text="'Name: '+ ${op.name}"></p>
                      <p th:text="'Fee: '+ ${op.fee}"></p>
                  </div>
              </fieldset>

          </div>
      </fieldset>
  </section>


  <!-- Volendo si puÃ² gestire il Logout con form[pulsante]- fare un altro servlet in cui
  resetti la variabile a 0 e user a null. -->

</body>
</html>